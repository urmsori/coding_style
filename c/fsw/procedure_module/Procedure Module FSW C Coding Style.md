# C 코딩 스타일: 프로시저/모듈 계층 구조

## 1. 목적

*   프로시저(p)와 모듈(m) 계층 구조를 정의하고, 계층 간 의존성 규칙 및 네이밍 컨벤션을 명확히 함.
*   코드의 구조적 안정성, 재사용성, 유지보수성 향상.

## 2. 아키텍처 개요

*   계층 구분:
    *   프로시저 (p0, p1, p2, ...): 상위 레벨 로직, 작업 흐름 담당. Top-down 구성 (p0 최상위).
    *   모듈 (m0, m1, m2, ...): 하위 레벨 기능, 데이터, 추상화 담당. Bottom-up 구성 (m0 최하위).
*   폴더 구조: 각 계층(p0, m1 등)은 자체 폴더를 가짐.

## 3. 계층 간 의존성 규칙

*   프로시저 간: pX는 pY (단, Y > X) 참조 가능.
*   모듈 간: mX는 mY (단, Y < X) 참조 가능.
*   프로시저 -> 모듈: 모든 pX는 모든 mY 참조 가능.
*   모듈 -> 프로시저: 참조 절대 불가.
*   최하위/최상위:
    *   m0: 외부 라이브러리 외 프로젝트 내 어떤 계층도 참조 불가.
    *   p0: 자신을 제외한 모든 하위 계층(p1, p2..., m*) 참조 가능.
*   적용: #include, 함수 호출, 타입 사용 등 모든 참조 관계에 적용.

## 4. 폴더 네이밍 규칙

*   프로시저 내부: 계층 폴더(p0, p1 등) 바로 아래의 하위 폴더명은 동사나 이벤트명 사용.
    *   예: p1/init/, p2/wakeup/
*   모듈 내부: 계층 폴더(m0, m1 등) 바로 아래의 하위 폴더명은 명사 사용.
    *   예: m1/memory/, m2/timer/
*   계층 폴더명: p 또는 m + 숫자 형식 유지 (예: p0, m1).

## 5. 기본 네이밍 규칙 (파일/함수)

*   형식: snake_case 사용.
*   접두사: 파일명, 전역 함수/타입 등 외부 노출 요소는 소속 계층 및 폴더명 포함 권장.
    *   예: p1_init_main.c, p1_init(), m1_memory_alloc(), m1_memory_block_t

## 6. 핵심 원칙

*   의존성 방향 엄수: 정의된 방향 외의 참조는 절대 금지. 순환 참조 방지.
*   캡슐화: 각 계층 및 컴포넌트(동사/명사 폴더)는 내부 구현을 숨기고 정의된 인터페이스만 노출 권장.
